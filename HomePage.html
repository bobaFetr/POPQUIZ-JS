<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <a href="#" id="logout-button">Log Out</a>
</head>
<body>
    <h1>Choose  a pop quiz</h1>
    <ul>
        <li><a href="HTMLPopQuiz.html">HTML Pop Quiz</a></li>
        <li><a href="PopQuizWithTimer.html">HTML Pop Quiz 2</a></li>
    </ul>
    <h1>Quiz Questions</h1>
  <div id="questionsContainer"></div>
    <!-- <a href="HTMLPopQuiz.html">HTML Pop Quiz</a>
    <a href="HTMLPopQuiz2.html">HTML Pop Quiz 2</a>
    <link rel="stylesheet" href="index.html"> -->
    <script>
    // Check if the user is logged in
    const user = localStorage.getItem('user');
    if (!user) {
      // Redirect to the login page if not logged in
      alert('You must log in to access this page.');
      window.location.href = 'LoginPage.html';
    }
  </script>


  <script>
  document.getElementById('logout-button').addEventListener('click', async (e) => {
    e.preventDefault();

    const token = localStorage.getItem('authToken');

    try {
      await fetch('http://localhost:3030/users/logout', {
        method: 'GET',
        headers: {
          'X-Authorization': token
        }
      });
    } catch (err) {
      console.warn('Logout request failed, continuing anyway...');
    }

    // Clear user session
    localStorage.removeItem('authToken');
    localStorage.removeItem('userId');

    // Redirect to login
    window.location.href = '/LoginPage.html'; // Adjust path as needed
  });
</script>



<!-- <script>
async function loadQuestions() {
    try {
        const res = await fetch('http://localhost:3030/data/questions');
        const questions = await res.json();

        console.log('Loaded questions:', questions);

        const container = document.getElementById('questionsContainer');
        container.innerHTML = '';

        questions.forEach(q => {
            const qDiv = document.createElement('div');
            qDiv.classList.add('question');

            const qTitle = document.createElement('h3');
            qTitle.textContent = q.text;
            qDiv.appendChild(qTitle);

            q.options.forEach(opt => {
                const optP = document.createElement('p');
                optP.textContent = opt.text;
                qDiv.appendChild(optP);
            });

            container.appendChild(qDiv);
        });
    } catch (err) {
        console.error('Failed to load questions:', err);
    }
}

// Load questions when page loads
window.addEventListener('DOMContentLoaded', loadQuestions);
</script> -->

</body>
</html>